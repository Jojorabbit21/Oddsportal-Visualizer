import requests
import re

betting_types = {
  "1x2": 1,
  "ou": 2,
  "ha": 3,
  "ah": 5,
}

sport_id = {
  "soccer": 2,
  "basketball": 3,
  "baseball": 6,
}

bookmaker_id = {
  '10Bet': '14',
  '10cric': '540',
  '10x10bet': '581',
  '12BET': '80',
  '138': '424',
  '188BET': '56',
  '18bet': '416',
  '1bet': '537',
  '1xBet': '417',
  '1xBet.kz': '471',
  '1xStavka.ru': '453',
  '22Bet': '500',
  '32Red Bet': '154',
  '5Dimes': '20',
  '5plusbet': '422',
  '888sport': '27',
  '90dakika': '388',
  'Admiral': '369',
  'AllYouBet': '146',
  'Asianodds': '476',
  'BET2BE': '412',
  'BETFAN': '572',
  'Babibet': '469',
  'Bahis Arena': '488',
  'Bestake': '127',
  'Bestbet': '125',
  'Bet Victor': '137',
  'Bet-52': '436',
  'Bet1128.it': '367',
  'Bet24': '54',
  'Bet770': '115',
  'Bet7days': '86',
  'Bet9': '405',
  'Bet911': '123',
  'Bet9ja': '509',
  'BetAlfa.co': '552',
  'BetAndYou': '565',
  'BetBeast': '136',
  'BetBoom': '567',
  'BetCRIS': '68',
  'BetCity': '482',
  'BetCity.ru': '481',
  'BetDSI': '79',
  'BetEast': '452',
  'BetFinal': '594',
  'BetGun': '90',
  'BetInAsia': '575',
  'BetJoe': '514',
  'BetOlimp': '446',
  'BetOnline': '78',
  'BetPhoenix': '91',
  'BetPlanet': '579',
  'BetRedKings': '138',
  'BetUS': '59',
  'BetVictor': '76',
  'BetVictor.de': '145',
  'BetWorld': '443',
  'Betadonis': '421',
  'Betago': '543',
  'Betako': '171',
  'Betano': '516',
  'Betano.br': '574',
  'Betano.pt': '545',
  'Betbiga': '536',
  'Betboo': '107',
  'Betclic': '32',
  'Betclic.fr': '141',
  'Betclic.it': '140',
  'Betclic.pl': '539',
  'Betclic.pt': '447',
  'Betcruise': '113',
  'Betdaq': '39',
  'Betebet': '466',
  'Betera': '618',
  'Betfair': '429',
  'Betfair Exchange': '44',
  'Betfan.pl_old': '554',
  'Betfarm': '506',
  'Betfred': '21',
  'Bethard': '464',
  'Betika': '544',
  'Betika.com.gh': '585',
  'Betinternet': '112',
  'BetjuegoOld': '556',
  'Betmaster': '578',
  'Betmoon': '477',
  'BetolimpMaster': '458',
  'Betonline247': '110',
  'Betpas': '487',
  'Betrally': '403',
  'Betrally India': '525',
  'Betring': '614',
  'Bets10': '142',
  'Betsafe': '24',
  'Betsafe.ee': '508',
  'Betsafe.lt': '512',
  'Betsafe.lv': '507',
  'Betsensation': '577',
  'Betser': '475',
  'Betsson': '43',
  'Betsson exch.': '7',
  'Betstars': '499',
  'Bettilt': '432',
  'Betway': '26',
  'Betway Africa': '533',
  'Betway Africa Mozambique': '589',
  'Betway PT': '587',
  'Bilyoner': '568',
  'BizimBahis': '437',
  'Blue Square': '17',
  'Bodog': '34',
  'Bookmaker': '69',
  'Bovada': '377',
  'BoyleSports': '30',
  'Bwin.co': '598',
  'Bwin.dk': '490',
  'Bwin.ru': '563',
  'Canbet': '12',
  'CasaPariurilor': '603',
  'CasinoEstoril': '495',
  'Centrebet': '4',
  'Chance.cz': '45',
  'Chezacash': '600',
  'Circlebet': '120',
  'Circus': '586',
  'Circus.pe': '553',
  'ComeOn': '383',
  'Coolbet': '468',
  'Coral': '71',
  'Curebet': '583',
  'DOXXbet': '23',
  'Dafabet': '147',
  'Dashbet': '415',
  'Dhoze': '410',
  'Ditobet': '612',
  'Domusbet': '548',
  'DoradoBet': '532',
  'Dotabet': '478',
  'Efbet RO': '613',
  'ErisBet365': '615',
  'ErisBetterIt': '629',
  'Eurobet': '35',
  'Eurobet.it': '322',
  'EurosportBET': '122',
  'EurosportBET.fr': '131',
  'Everygame': '31',
  'Expekt': '9',
  'Extrabet': '118',
  'FEZbet': '588',
  'Fastbet': '576',
  'Favbet': '610',
  'Fonbet.by': '604',
  'Fonbet.kz': '547',
  'Fortebet': '542',
  'Fortuna.ro': '438',
  'FortunaWin': '376',
  'Forvetbet': '382',
  'France Pari': '139',
  'GGBET': '550',
  'GGBET.ru': '558',
  'GSB.com.ug': '519',
  'Gamebookers': '11',
  'Getwin': '156',
  'Globetsport': '368',
  'GoBetGo': '413',
  'Goalwin': '119',
  'Golpas': '611',
  'Grandbetting': '450',
  'GreatOdds': '601',
  'GreatOdds.rs': '602',
  'Guts': '433',
  'Hajper': '529',
  'Heaven Bet': '389',
  'Hepsibahis': '402',
  'Heroes Sports': '82',
  'HiperBet': '400',
  'Inkabet': '483',
  'Instant Action Sports': '111',
  'Interapostas': '374',
  'Internet1x2': '67',
  'Interwetten': '1',
  'Interwetten.es': '149',
  'Interwetten.it': '375',
  'Intragame': '448',
  'Island Casino': '92',
  'Jetbull': '57',
  'Jojobet': '434',
  'Justbet': '114',
  'KTO': '520',
  'Kajot bet': '371',
  'Kirolbet': '546',
  'Kroon Casino': '428',
  'Kwikbet.co.ke': '515',
  'LBapuestas': '150',
  'LV BET': '502',
  'Ladbrokes': '28',
  'Lasbet': '584',
  'Latribet': '597',
  'Legends': '88',
  'Leon.ru': '455',
  'Leonbets': '73',
  'Ligastavok': '497',
  'Luckia.es': '457',
  'Luckia.pt': '551',
  'Luxbet': '124',
  'MAXITIP.cz': '47',
  'MELbet': '573',
  'MSport': '599',
  'Marathonbet': '381',
  'Marathonbet.ru': '531',
  'MarathonbetTest': '496',
  'Marcaapuestas': '440',
  'Marsbahis': '505',
  'Marsbet': '470',
  'Matchbook': '390',
  'Miapuesta': '151',
  'Milenium': '170',
  'Mobilbahis': '479',
  'MrGreen': '535',
  'MrRingo': '461',
  'N1 Bet': '609',
  'Nairabet': '503',
  'NetBet': '161',
  'NetBet.fr': '398',
  'NetBet.it': '423',
  'NightRush': '492',
  'Nike': '166',
  'Nike.sk': '293',
  'NordicBet': '33',
  'Noxwin': '55',
  'OLIMPBET': '486',
  'OLIMPBET.kz': '561',
  'Oddset': '396',
  'Oddsmaker': '109',
  'Oddsring': '393',
  'Offsidebet': '380',
  'OlyBet.it': '616',
  'OtoBet': '426',
  'PMU FR': '153',
  'PZBuk': '569',
  'Paddy Power': '60',
  'PaddyPower.it': '379',
  'Paf': '101',
  'Parimatch': '491',
  'Parimatch.ru': '527',
  'Parimatchtz': '538',
  'ParionsSport': '484',
  'ParionsWeb.fr': '134',
  'PartyBets': '10',
  'Partybets.fr': '144',
  'Pinnacle': '18',
  'Placard': '566',
  'Planetwin365': '467',
  'Players Only': '77',
  'Profitbet': '517',
  'RealDealBet': '425',
  'Redbet': '103',
  'Restbet': '439',
  'Riccobet': '456',
  'Rojabet': '590',
  'Rushbet.co': '541',
  'SAZKAbet.cz': '414',
  'SAjOO FR': '132',
  'SBG Global': '302',
  'SBOBET': '75',
  'STARLOTTOSPORT': '162',
  'STS.pl': '165',
  'ScandiBet': '473',
  'Seaniemac': '404',
  'Sekabet': '445',
  'ShilBet': '370',
  'Sisal': '159',
  'Skybet': '74',
  'Smarkets': '485',
  'Snabbare': '528',
  'Soccabet': '582',
  'Solverde.pt': '595',
  'Speedybet': '526',
  'SportPesa.it': '501',
  'Sportbet': '40',
  'Sportimba': '504',
  'Sportingbet': '38',
  'Sportingbet.au': '143',
  'Sportingbet.co.za': '521',
  'Sportingbet.gr': '408',
  'SportingbetMaster': '435',
  'Sportium.es': '406',
  'Sports': '108',
  'Sports Alive': '64',
  'Sports Interaction': '19',
  'Sports-1': '89',
  'SportsBetting': '387',
  'SportsBettingOnline': '385',
  'Sportsbet.com.au': '158',
  'Sportsbook': '100',
  'Stan James': '8',
  'Starvegas.it': '489',
  'Stoiximan': '409',
  'Stryyke': '97',
  'Sts.bet.com': '570',
  'Sts.co.uk': '571',
  'Sunmaker': '29',
  'Supabets': '513',
  'SupabetsZA': '518',
  'SuperAposta': '431',
  'SuperSport': '534',
  'Superbahis': '98',
  'Superbet.pl': '591',
  'Superbet.ro': '592',
  'Teletip': '167',
  'Tempobet': '395',
  'Tennisi.kz': '593',
  'TestingOnly': '474',
  'The Greek': '93',
  'Tipbet': '460',
  'Tipico': '70',
  'Tipico.it': '394',
  'Tiplix': '463',
  'Tipobet': '441',
  'Tipos': '169',
  'TippmixPro': '498',
  'Tipsport.cz': '49',
  'Tipsport.sk': '411',
  'Titanbet': '121',
  'Tobet': '130',
  'TonyBet': '378',
  'Top Bet': '373',
  'Topaz.az': '560',
  'Toto.nederlandse': '555',
  'Totolotek.pl': '472',
  'Totomix': '168',
  'Totonederlandse': '557',
  'Totosi': '155',
  'Triobet': '152',
  'Truvabet': '480',
  'Ucabet': '386',
  'Unibet': '5',
  'Unibet.fr': '160',
  'Unibet.it': '157',
  'Unibetau': '628',
  'Unibetbe': '619',
  'Unibetca': '622',
  'Unibetdk': '620',
  'Unibetee': '627',
  'Unibethu': '626',
  'Unibetnl': '621',
  'Unibetro': '623',
  'Unibetse': '624',
  'Unibetuk': '625',
  'VOBET': '617',
  'Vernons': '418',
  'Victory Tip': '366',
  'Vistabet.gr': '407',
  'VitalBet': '427',
  'Vivelasuerte': '530',
  'VonBets': '442',
  'Vulkan Bet': '451',
  'WSB.co.za': '522',
  'WSBets': '391',
  'WagerWeb': '244',
  'William Hill': '15',
  'WilliamHill.it': '372',
  'Winline': '397',
  'Winline.ru': '454',
  'Winmasters': '430',
  'Winmasters.ro': '465',
  'Winner': '399',
  'WonOdds': '420',
  'World Sports Exchange': '99',
  'Wplay.co': '523',
  'X-bet.co': '559',
  'Yajuego': '562',
  'Zamba.co': '524',
  'bet-at-home': '3',
  'bet-at-home.it': '384',
  'bet365': '16',
  'bet365.it': '419',
  'bet365.nj': '549',
  'bet365.nl': '605',
  'bet365.ru': '596',
  'betChronicle': '106',
  'betWize': '135',
  'betcart': '449',
  'betin.ke': '511',
  'betin.ug': '510',
  'betoto': '81',
  'bets4all': '72',
  'bwin': '2',
  'bwin.es': '392',
  'bwin.fr': '129',
  'bwin.it': '53',
  'bwin.pt': '459',
  'digibet': '87',
  'eFortuna.pl': '163',
  'efbet': '494',
  'efbet.it': '608',
  'europebet': '493',
  'iForBet.pl': '462',
  'iFortuna.cz': '46',
  'iFortuna.sk': '164',
  'mybet': '41',
  'mybet.it': '401',
  'totepool': '105',
  'unibet.nj': '564',
  'youwin': '128'
 }

headers = {
    "Referer": "https://www.oddsportal.com/",
    "User-agent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.99 Safari/537.36"
}

def unhash(xhash):
  decoded = "";
  for i in xhash.split("%")[1:]:
    decoded += chr(int(i, 16))
  return decoded

def get_xhash(sport:str, date:int):
  page = requests.get(f"https://www.oddsportal.com/matches/{sport}/{date}/", headers=headers)
  return unhash(re.findall(r'%s":"([^"]+)"' % date, page.text)[0])
